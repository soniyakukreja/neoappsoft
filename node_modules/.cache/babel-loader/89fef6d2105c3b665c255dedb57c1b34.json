{"ast":null,"code":"import _objectSpread from\"/home/neosoft/Desktop/neoappsoft/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/neosoft/Desktop/neoappsoft/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{Link,withRouter}from\"react-router-dom\";import{connect}from\"react-redux\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formErrors=_useState2[0],setFormErrors=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),successMessage=_useState6[0],setSuccessMessage=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];var getEmail=function getEmail(event){setUser(_objectSpread(_objectSpread({},user),{},{email:event.target.value}));};var getPassword=function getPassword(event){setUser(_objectSpread(_objectSpread({},user),{},{password:event.target.value}));};var validate=function validate(elm){var errors={};if(!elm.email.value){errors.email=\"Email is Required\";}if(!elm.password.value){errors.password=\"Password is Required\";}var errorkeys=Object.keys(errors);if(errorkeys.length>0)/*#__PURE__*/_jsx(_Fragment,{children:\"setFormErrors(errors) return errors\"});else return false;};var login=function login(e){e.preventDefault();var form=document.getElementById('login');var errors=validate(form.elements);if(errors){console.log('errors',errors);setFormErrors(errors);console.log('ferrors',formErrors);}else{if(user.email&&user.password){var apiurl=\"https://apibyashu.herokuapp.com/api/login\";axios({url:apiurl,method:\"post\",data:user}).then(function(response){if(response.data.token){localStorage.token=response.data.token;setErrorMessage(\"\");setSuccessMessage(\"Logged In Successfully\");props.dispatch({type:\"LOGIN\",payload:response.data});props.history.push(\"/\");}else{setErrorMessage(\"Invalid credentials\");setSuccessMessage(\"\");}},function(error){setErrorMessage(\"Error from Login api \"+error);setSuccessMessage(\"\");});}else{setErrorMessage(\"Validation Failed\");setSuccessMessage(\"\");}}};return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"50%\",margin:\"auto\"},className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Login Here ! \"}),/*#__PURE__*/_jsxs(\"form\",{id:\"login\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",className:\"form-control\",onChange:getEmail}),(formErrors===null||formErrors===void 0?void 0:formErrors.name)&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-error\",children:[\" \",/*#__PURE__*/_jsx(\"div\",{children:formErrors.name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"form-control\",onChange:getPassword})]}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},className:\"text-center\",children:errorMessage}),successMessage?/*#__PURE__*/_jsx(\"div\",{style:{color:\"green\"},className:\"text-center\",children:successMessage}):'',/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success form-control text-center my-2\",onClick:login,children:\"Login\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{float:'right'},children:/*#__PURE__*/_jsx(Link,{to:\"/forgotpass\",children:\"Forgot password\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"New User? Click Here\"})})]});}Login=withRouter(Login);export default connect()(Login);","map":{"version":3,"sources":["/home/neosoft/Desktop/neoappsoft/src/Login.js"],"names":["useState","useEffect","axios","Link","withRouter","connect","Login","props","formErrors","setFormErrors","errorMessage","setErrorMessage","successMessage","setSuccessMessage","user","setUser","getEmail","event","email","target","value","getPassword","password","validate","elm","errors","errorkeys","Object","keys","length","login","e","preventDefault","form","document","getElementById","elements","console","log","apiurl","url","method","data","then","response","token","localStorage","dispatch","type","payload","history","push","error","width","margin","name","color","float"],"mappings":"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","sourcesContent":["import {useState,useEffect} from \"react\"\nimport axios from \"axios\"\nimport { Link ,withRouter } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\n\n\n\nfunction Login(props)\n{\n\n  var [formErrors,setFormErrors] = useState({})\n  var [errorMessage,setErrorMessage]=useState()\n  var [successMessage,setSuccessMessage]=useState()\n\n  var [user,setUser]=useState({})\n\n    let getEmail=(event)=>\n    {\n        setUser({\n            ...user,\n            email:event.target.value,\n        })\n    }\n    let getPassword=(event)=>\n    {\n        setUser({\n            ...user,\n            password:event.target.value,\n        })\n    }\n\n    var validate = function (elm){\n      var errors= {}\n      if(!elm.email.value){\n          \n        errors.email= \"Email is Required\"\n      }\n\n      if(!elm.password.value){\n          errors.password= \"Password is Required\"\n      }     \n      \n      var errorkeys = Object.keys(errors)\n      if(errorkeys.length>0)\n      <>\n      setFormErrors(errors)\n      return errors\n      </>\n      else\n      return false\n  }\n\n    let login = (e)=>{\n      e.preventDefault()\n      var form = document.getElementById('login')\n        var errors = validate(form.elements)\n        \n        if(errors){\n          console.log('errors',errors)\n            setFormErrors(errors)\n            console.log('ferrors',formErrors)\n        }else{\n\n          if(user.email && user.password){\n              \n          let apiurl=\"https://apibyashu.herokuapp.com/api/login\"\n            axios({\n                  url:apiurl,\n                  method:\"post\",\n                  data:user\n            }).then((response)=>{\n                if(response.data.token)\n                {\n                  localStorage.token = response.data.token\n                  setErrorMessage(\"\")\n                  setSuccessMessage(\"Logged In Successfully\")\n\n                  props.dispatch({\n                    type:\"LOGIN\",\n                    payload:response.data\n                  })\n                  props.history.push(\"/\")\n                }else\n                {\n                  setErrorMessage(\"Invalid credentials\")\n                  setSuccessMessage(\"\")\n                }\n            },(error)=>{\n              setErrorMessage(\"Error from Login api \"+error) \n              setSuccessMessage(\"\") \n            })\n          }\n          else{\n            setErrorMessage(\"Validation Failed\")\n            setSuccessMessage(\"\")\n          }\n      }\n    }\n\n\t\treturn(\n            \n\t\t\t<div style={{width:\"50%\" , margin:\"auto\"}} className=\"col-md-6\">\n              <h2> Login Here ! </h2>\n              <form id=\"login\">\n                <div className=\"form-group\">\n                    <label>Email</label>\n                <input type=\"email\" id=\"email\" className=\"form-control\" onChange={getEmail}></input>\n                   {/* { user?.email && <label>{user.email}</label> } */}\n                   {formErrors?.name && <div className=\"form-error\"> <div>{formErrors.name}</div></div>}\n                </div>\n                <div className=\"form-group\">\n                <label>Password</label>\n                <input type=\"password\" id=\"password\" className=\"form-control\" onChange={getPassword}></input>\n                   {/* {user?.password && <label>{user.password}</label> } */}\n                </div>\n                <div style={{color:\"red\"}}  className=\"text-center\">\n                    {errorMessage}\n                </div>\n                {successMessage?\n                <div style={{color:\"green\"}} className=\"text-center\">\n                    {successMessage}\n                </div>:''}\n                <button className=\"btn btn-success form-control text-center my-2\"  onClick={login}>Login</button>\n                </form>\n                <div style={{float:'right'}}>\n                  <Link to=\"/forgotpass\">Forgot password</Link>\n                </div>\n                <div>\n                  <Link to=\"/signup\">New User? Click Here</Link>\n                </div>\n            </div>\n\t\t)\n\t\n}\n\nLogin = withRouter(Login)\n\nexport default connect()(Login);"]},"metadata":{},"sourceType":"module"}