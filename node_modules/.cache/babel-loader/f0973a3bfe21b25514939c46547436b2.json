{"ast":null,"code":"import _slicedToArray from\"/home/neosoft/Desktop/neoappsoft/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import logo from\"./logo.svg\";import'./App.css';import Home from'./Home';import Navbar from'./Navbar';import Carousel from'./Carousel';import Signup from'./Signup';import Login from'./Login';import Search from'./Search';import Pagenotfound from'./Pagenotfound';import Cakedetails from'./Cakedetails';import Cart from'./Cart';import Checkout from'./Checkout';import ForgotPass from'./ForgotPass';import axios from\"axios\";import{connect}from'react-redux';import{BrowserRouter as Router,Route,Redirect,Switch}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(props){console.log('app props',props);// console.log('currenturl',window.location.href)\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),user_cart=_useState2[0],setUser_cart=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),usertoken=_useState4[0],setUsertoken=_useState4[1];useEffect(function(){if(localStorage.token&&!props.user){var token=localStorage.token;axios({url:'https://apibyashu.herokuapp.com/api/getuserdetails',method:\"get\",headers:{authtoken:token}}).then(function(response){props.dispatch({type:\"INITIALIZE_USER\",payload:response.data.data});setUsertoken(response.data.token);},function(error){console.log(\"response from get user details api : \",error);});}if(localStorage.token){axios({url:\"https://apibyashu.herokuapp.com/api/cakecart\",method:\"post\",data:{},headers:{authtoken:localStorage.token}}).then(function(response){props.dispatch({type:\"CART_DATA\",payload:response.data.data});setUser_cart(response.data.token);},function(error){console.log(\"user get cart api error : \",error);});}},[props.token]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,component:Home}),/*#__PURE__*/_jsx(Route,{path:\"/search\",exact:true,component:Search}),/*#__PURE__*/_jsx(Route,{path:\"/cake/:cakeid\",exact:true,component:Cakedetails}),/*#__PURE__*/_jsx(Route,{path:\"/login\",exact:true,children:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",exact:true,component:Signup}),/*#__PURE__*/_jsx(Route,{path:\"/forgotpass\",exact:true,component:ForgotPass}),localStorage.token?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/checkout\",exact:true,component:Checkout}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",exact:true,component:Cart})]}):'',/*#__PURE__*/_jsx(Route,{path:\"/*\",children:/*#__PURE__*/_jsx(Redirect,{to:\"/\"})})]})})]})});}export default connect(function(state,props){var _state$user;return{user:state===null||state===void 0?void 0:state.user,token:state===null||state===void 0?void 0:(_state$user=state.user)===null||_state$user===void 0?void 0:_state$user.token};})(App);","map":{"version":3,"sources":["/home/neosoft/Desktop/neoappsoft/src/App.js"],"names":["useState","useEffect","Home","Navbar","Carousel","Signup","Login","Search","Pagenotfound","Cakedetails","Cart","Checkout","ForgotPass","axios","connect","BrowserRouter","Router","Route","Redirect","Switch","App","props","console","log","user_cart","setUser_cart","usertoken","setUsertoken","localStorage","token","user","url","method","headers","authtoken","then","response","dispatch","type","payload","data","error","state"],"mappings":"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","sourcesContent":["import {useState,useEffect} from \"react\"\nimport logo from './logo.svg';\nimport './App.css';\nimport Home from './Home'\nimport Navbar from './Navbar'\nimport Carousel from './Carousel'\nimport Signup from './Signup'\nimport Login from './Login'\nimport Search from './Search'\nimport Pagenotfound from './Pagenotfound'\nimport Cakedetails from './Cakedetails'\nimport Cart from './Cart'\nimport Checkout from './Checkout'\nimport ForgotPass from './ForgotPass'\nimport axios from \"axios\"\nimport { connect } from 'react-redux'\nimport { BrowserRouter as Router, Route, Redirect, Switch } from 'react-router-dom';\n\n\nfunction App(props) {\nconsole.log('app props',props)\n// console.log('currenturl',window.location.href)\nvar [user_cart,setUser_cart]=useState()\nvar [usertoken,setUsertoken]=useState()\n\nuseEffect(()=>{\n\n  if(localStorage.token && !props.user){\n    \n    var token = localStorage.token \n    axios({\n        url:'https://apibyashu.herokuapp.com/api/getuserdetails',\n        method:\"get\",\n        headers : {\n          authtoken: token\n      }\n    }).then((response)=>{\n         props.dispatch({\n          type:\"INITIALIZE_USER\",\n          payload:response.data.data\n      })\n      setUsertoken(response.data.token)\n\n    }, (error)=>{\n        console.log(\"response from get user details api : \",error)\n    })\n  }\n  \n\n    if(localStorage.token){\n      axios({\n          url:\"https://apibyashu.herokuapp.com/api/cakecart\",\n          method:\"post\",\n          data: {},\n          headers : {\n              authtoken: localStorage.token\n          }\n      }).then((response)=>{\n          props.dispatch({\n            type:\"CART_DATA\",\n            payload:response.data.data\n        })\n        setUser_cart(response.data.token)\n      }, (error)=>{\n          console.log(\"user get cart api error : \",error)\n      })\n    }\n  },[props.token])\n\n\n  return (\n   <div>\n     <Router>\n       <Navbar/>\n       <div>\n       <Switch>\n           <Route path=\"/\" exact component={Home} />\n           <Route path=\"/search\" exact component={Search} />  \n           <Route path=\"/cake/:cakeid\" exact component={Cakedetails} />\n           \n\n           <Route path=\"/login\"  exact  ><Login /></Route>\n           <Route path=\"/signup\" exact component={Signup} />\n           <Route path=\"/forgotpass\" exact component={ForgotPass} />\n           {/* <Route path=\"/checkout\"  component={Checkout} />\n           <Route path=\"/cart\" exact component={Cart} />\n           */}\n           {localStorage.token ?\n           <>\n           \n           <Route path=\"/checkout\" exact  component={Checkout} />\n           <Route path=\"/cart\" exact component={Cart} />\n           </>:''  \n           }\n           {/* <Route path=\"/*\" exact component={Pagenotfound} /> */}\n\n            <Route path=\"/*\">\n             <Redirect to=\"/\"></Redirect>\n           </Route>  \n         </Switch>\n       </div>\n     </Router>\n   </div>\n  );\n}\n\nexport default connect(function(state,props){\n return{\n     user:state?.user ,\n     token:state?.user?.token\n  }\n})(App);"]},"metadata":{},"sourceType":"module"}