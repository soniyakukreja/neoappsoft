{"ast":null,"code":"import _objectSpread from\"/home/neosoft/Desktop/neoappsoft/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/neosoft/Desktop/neoappsoft/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{Link,withRouter}from\"react-router-dom\";import{connect}from\"react-redux\";import Spinner from\"./UI/Spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),formErrors=_useState4[0],setformErrors=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),successMessage=_useState8[0],setSuccessMessage=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),user=_useState10[0],setUser=_useState10[1];var getEmail=function getEmail(event){setUser(_objectSpread(_objectSpread({},user),{},{email:event.target.value}));};var getPassword=function getPassword(event){setUser(_objectSpread(_objectSpread({},user),{},{password:event.target.value}));};var validate=function validate(elm){var errors={};if(!elm.email.value){errors.email=\"Email is Required\";}if(!elm.password.value){errors.password=\"Password is Required\";}var errorkeys=Object.keys(errors);if(errorkeys.length>0)return errors;else return false;};var login=function login(e){e.preventDefault();var form=document.getElementById('login');var errors=validate(form.elements);if(errors){console.log('errors',errors);setformErrors(errors);}else{setformErrors({});setLoading(true);if(user.email&&user.password){var apiurl=\"https://apibyashu.herokuapp.com/api/login\";axios({url:apiurl,method:\"post\",data:user}).then(function(response){if(response.data.token){localStorage.token=response.data.token;setErrorMessage(\"\");setSuccessMessage(\"Logged In Successfully\");props.dispatch({type:\"LOGIN\",payload:response.data});props.history.push(\"/\");}else{setErrorMessage(\"Invalid credentials\");setSuccessMessage(\"\");}setLoading(false);},function(error){setErrorMessage(\"Error from Login api \"+error);setSuccessMessage(\"\");setLoading(false);});}else{setErrorMessage(\"Validation Failed\");setSuccessMessage(\"\");}}};return loading?/*#__PURE__*/_jsx(Spinner,{}):/*#__PURE__*/_jsxs(\"div\",{style:{width:\"50%\",margin:\"auto\"},className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Login Here ! \"}),/*#__PURE__*/_jsxs(\"form\",{id:\"login\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",className:\"form-control\",onChange:getEmail}),(formErrors===null||formErrors===void 0?void 0:formErrors.email)&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-error\",children:[\" \",/*#__PURE__*/_jsx(\"div\",{children:formErrors.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"form-control\",onChange:getPassword}),(formErrors===null||formErrors===void 0?void 0:formErrors.password)&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-error\",children:[\" \",/*#__PURE__*/_jsx(\"div\",{children:formErrors.password})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},className:\"text-center\",children:errorMessage}),successMessage?/*#__PURE__*/_jsx(\"div\",{style:{color:\"green\"},className:\"text-center\",children:successMessage}):'',/*#__PURE__*/_jsx(\"button\",{className:\"btn text-light form-control text-center my-2\",style:{backgroundColor:\"#043d76\"},onClick:login,children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",style:{float:'left'},children:\"New User? Click Here\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgotpass\",style:{float:'right'},children:\"Forgot password\"})})]})]});}Login=withRouter(Login);export default connect()(Login);","map":{"version":3,"sources":["/home/neosoft/Desktop/neoappsoft/src/Login.js"],"names":["useState","useEffect","axios","Link","withRouter","connect","Spinner","Login","props","loading","setLoading","formErrors","setformErrors","errorMessage","setErrorMessage","successMessage","setSuccessMessage","user","setUser","getEmail","event","email","target","value","getPassword","password","validate","elm","errors","errorkeys","Object","keys","length","login","e","preventDefault","form","document","getElementById","elements","console","log","apiurl","url","method","data","then","response","token","localStorage","dispatch","type","payload","history","push","error","width","margin","color","backgroundColor","float"],"mappings":"qOAAA,OAAQA,QAAR,CAAiBC,SAAjB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,cAApB,C,wFAGA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CACA,eACgCR,QAAQ,CAAC,KAAD,CADxC,wCACSS,OADT,eACkBC,UADlB,8BAGmCV,QAAQ,CAAC,EAAD,CAH3C,yCAGOW,UAHP,eAGkBC,aAHlB,8BAIqCZ,QAAQ,EAJ7C,yCAIOa,YAJP,eAIoBC,eAJpB,8BAKyCd,QAAQ,EALjD,yCAKOe,cALP,eAKsBC,iBALtB,8BAOqBhB,QAAQ,CAAC,EAAD,CAP7B,0CAOOiB,IAPP,gBAOYC,OAPZ,gBASI,GAAIC,CAAAA,QAAQ,CAAC,QAATA,CAAAA,QAAS,CAACC,KAAD,CACb,CACIF,OAAO,gCACAD,IADA,MAEHI,KAAK,CAACD,KAAK,CAACE,MAAN,CAAaC,KAFhB,GAAP,CAIH,CAND,CAOA,GAAIC,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,CAACJ,KAAD,CAChB,CACIF,OAAO,gCACAD,IADA,MAEHQ,QAAQ,CAACL,KAAK,CAACE,MAAN,CAAaC,KAFnB,GAAP,CAIH,CAND,CAQA,GAAIG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAUC,GAAV,CAAc,CAC3B,GAAIC,CAAAA,MAAM,CAAE,EAAZ,CACA,GAAG,CAACD,GAAG,CAACN,KAAJ,CAAUE,KAAd,CAAoB,CAElBK,MAAM,CAACP,KAAP,CAAc,mBAAd,CACD,CAED,GAAG,CAACM,GAAG,CAACF,QAAJ,CAAaF,KAAjB,CAAuB,CACnBK,MAAM,CAACH,QAAP,CAAiB,sBAAjB,CACH,CAED,GAAII,CAAAA,SAAS,CAAGC,MAAM,CAACC,IAAP,CAAYH,MAAZ,CAAhB,CACA,GAAGC,SAAS,CAACG,MAAV,CAAiB,CAApB,CACA,MAAOJ,CAAAA,MAAP,CADA,IAGA,OAAO,MAAP,CACH,CAhBC,CAkBA,GAAIK,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,CAAD,CAAK,CACfA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,IAAI,CAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAX,CACE,GAAIV,CAAAA,MAAM,CAAGF,QAAQ,CAACU,IAAI,CAACG,QAAN,CAArB,CAEA,GAAGX,MAAH,CAAU,CACRY,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAqBb,MAArB,EACAhB,aAAa,CAACgB,MAAD,CAAb,CAED,CAJD,IAIK,CACHhB,aAAa,CAAC,EAAD,CAAb,CACAF,UAAU,CAAC,IAAD,CAAV,CACA,GAAGO,IAAI,CAACI,KAAL,EAAcJ,IAAI,CAACQ,QAAtB,CAA+B,CAE/B,GAAIiB,CAAAA,MAAM,CAAC,2CAAX,CACExC,KAAK,CAAC,CACAyC,GAAG,CAACD,MADJ,CAEAE,MAAM,CAAC,MAFP,CAGAC,IAAI,CAAC5B,IAHL,CAAD,CAAL,CAIG6B,IAJH,CAIQ,SAACC,QAAD,CAAY,CAChB,GAAGA,QAAQ,CAACF,IAAT,CAAcG,KAAjB,CACA,CACEC,YAAY,CAACD,KAAb,CAAqBD,QAAQ,CAACF,IAAT,CAAcG,KAAnC,CACAlC,eAAe,CAAC,EAAD,CAAf,CACAE,iBAAiB,CAAC,wBAAD,CAAjB,CAEAR,KAAK,CAAC0C,QAAN,CAAe,CACbC,IAAI,CAAC,OADQ,CAEbC,OAAO,CAACL,QAAQ,CAACF,IAFJ,CAAf,EAIArC,KAAK,CAAC6C,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACD,CAXD,IAYA,CACExC,eAAe,CAAC,qBAAD,CAAf,CACAE,iBAAiB,CAAC,EAAD,CAAjB,CACD,CACDN,UAAU,CAAC,KAAD,CAAV,CACH,CAtBD,CAsBE,SAAC6C,KAAD,CAAS,CACTzC,eAAe,CAAC,wBAAwByC,KAAzB,CAAf,CACAvC,iBAAiB,CAAC,EAAD,CAAjB,CACAN,UAAU,CAAC,KAAD,CAAV,CACD,CA1BD,EA2BD,CA9BD,IA+BI,CACFI,eAAe,CAAC,mBAAD,CAAf,CACAE,iBAAiB,CAAC,EAAD,CAAjB,CACD,CACJ,CACF,CAhDD,CAiDF,MAEIP,CAAAA,OAAO,cAAG,KAAC,OAAD,IAAH,cAEV,aAAK,KAAK,CAAE,CAAC+C,KAAK,CAAC,KAAP,CAAeC,MAAM,CAAC,MAAtB,CAAZ,CAA2C,SAAS,CAAC,UAArD,wBACW,sCADX,cAEW,cAAM,EAAE,CAAC,OAAT,wBACE,aAAK,SAAS,CAAC,YAAf,wBACI,gCADJ,cAEA,cAAO,IAAI,CAAC,OAAZ,CAAoB,EAAE,CAAC,OAAvB,CAA+B,SAAS,CAAC,cAAzC,CAAwD,QAAQ,CAAEtC,QAAlE,EAFA,CAII,CAAAR,UAAU,OAAV,EAAAA,UAAU,SAAV,QAAAA,UAAU,CAAEU,KAAZ,gBAAqB,aAAK,SAAS,CAAC,YAAf,4BAA6B,qBAAMV,UAAU,CAACU,KAAjB,EAA7B,GAJzB,GADF,cAOE,aAAK,SAAS,CAAC,YAAf,wBACA,mCADA,cAEA,cAAO,IAAI,CAAC,UAAZ,CAAuB,EAAE,CAAC,UAA1B,CAAqC,SAAS,CAAC,cAA/C,CAA8D,QAAQ,CAAEG,WAAxE,EAFA,CAGC,CAAAb,UAAU,OAAV,EAAAA,UAAU,SAAV,QAAAA,UAAU,CAAEc,QAAZ,gBAAwB,aAAK,SAAS,CAAC,YAAf,4BAA6B,qBAAMd,UAAU,CAACc,QAAjB,EAA7B,GAHzB,GAPF,cAcE,YAAK,KAAK,CAAE,CAACiC,KAAK,CAAC,KAAP,CAAZ,CAA4B,SAAS,CAAC,aAAtC,UACK7C,YADL,EAdF,CAiBGE,cAAc,cACf,YAAK,KAAK,CAAE,CAAC2C,KAAK,CAAC,OAAP,CAAZ,CAA6B,SAAS,CAAC,aAAvC,UACK3C,cADL,EADe,CAGR,EApBT,cAqBE,eAAQ,SAAS,CAAC,8CAAlB,CAAgE,KAAK,CAAE,CAAC4C,eAAe,CAAC,SAAjB,CAAvE,CAAqG,OAAO,CAAE1B,KAA9G,mBArBF,GAFX,cAyBe,aAAK,SAAS,CAAC,KAAf,wBACF,YAAM,SAAS,CAAC,OAAhB,uBACE,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,CAAmB,KAAK,CAAE,CAAC2B,KAAK,CAAC,MAAP,CAA1B,kCADF,EADE,cAIF,YAAK,SAAS,CAAC,OAAf,uBACE,KAAC,IAAD,EAAM,EAAE,CAAC,aAAT,CAAuB,KAAK,CAAE,CAACA,KAAK,CAAC,OAAP,CAA9B,6BADF,EAJE,GAzBf,GAJD,CAyCD,CAEDrD,KAAK,CAAGH,UAAU,CAACG,KAAD,CAAlB,CAEA,cAAeF,CAAAA,OAAO,GAAGE,KAAH,CAAtB","sourcesContent":["import {useState,useEffect} from \"react\"\nimport axios from \"axios\"\nimport { Link ,withRouter } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\nimport Spinner from \"./UI/Spinner\";\n\n\nfunction Login(props)\n{\n  const [loading, setLoading] = useState(false);\n\n  var [formErrors,setformErrors] = useState({})\n  var [errorMessage,setErrorMessage]=useState()\n  var [successMessage,setSuccessMessage]=useState()\n\n  var [user,setUser]=useState({})\n\n    let getEmail=(event)=>\n    {\n        setUser({\n            ...user,\n            email:event.target.value,\n        })\n    }\n    let getPassword=(event)=>\n    {\n        setUser({\n            ...user,\n            password:event.target.value,\n        })\n    }\n\n    var validate = function (elm){\n      var errors= {}\n      if(!elm.email.value){\n          \n        errors.email= \"Email is Required\"\n      }\n\n      if(!elm.password.value){\n          errors.password= \"Password is Required\"\n      }     \n      \n      var errorkeys = Object.keys(errors)\n      if(errorkeys.length>0)\n      return errors\n      else\n      return false\n  }\n\n    let login = (e)=>{\n      e.preventDefault()\n      var form = document.getElementById('login')\n        var errors = validate(form.elements)\n        \n        if(errors){\n          console.log('errors',errors)\n          setformErrors(errors)\n            \n        }else{\n          setformErrors({})\n          setLoading(true);\n          if(user.email && user.password){\n              \n          let apiurl=\"https://apibyashu.herokuapp.com/api/login\"\n            axios({\n                  url:apiurl,\n                  method:\"post\",\n                  data:user\n            }).then((response)=>{\n                if(response.data.token)\n                {\n                  localStorage.token = response.data.token\n                  setErrorMessage(\"\")\n                  setSuccessMessage(\"Logged In Successfully\")\n\n                  props.dispatch({\n                    type:\"LOGIN\",\n                    payload:response.data\n                  })\n                  props.history.push(\"/\")\n                }else\n                {\n                  setErrorMessage(\"Invalid credentials\")\n                  setSuccessMessage(\"\")\n                }\n                setLoading(false);\n            },(error)=>{\n              setErrorMessage(\"Error from Login api \"+error) \n              setSuccessMessage(\"\") \n              setLoading(false);\n            })\n          }\n          else{\n            setErrorMessage(\"Validation Failed\")\n            setSuccessMessage(\"\")\n          }\n      }\n    }\n\t\treturn(\n      \n      loading?( <Spinner />\n        ):(\n\t\t\t<div style={{width:\"50%\" , margin:\"auto\"}} className=\"col-md-6\">\n              <h2> Login Here ! </h2>\n              <form id=\"login\">\n                <div className=\"form-group\">\n                    <label>Email</label>\n                <input type=\"email\" id=\"email\" className=\"form-control\" onChange={getEmail}></input>\n                   {/* { user?.email && <label>{user.email}</label> } */}\n                   {formErrors?.email && <div className=\"form-error\"> <div>{formErrors.email}</div></div>}\n                </div>\n                <div className=\"form-group\">\n                <label>Password</label>\n                <input type=\"password\" id=\"password\" className=\"form-control\" onChange={getPassword}></input>\n                {formErrors?.password && <div className=\"form-error\"> <div>{formErrors.password}</div></div>}\n\n                   {/* {user?.password && <label>{user.password}</label> } */}\n                </div>\n                <div style={{color:\"red\"}}  className=\"text-center\">\n                    {errorMessage}\n                </div>\n                {successMessage?\n                <div style={{color:\"green\"}} className=\"text-center\">\n                    {successMessage}\n                </div>:''}\n                <button className=\"btn text-light form-control text-center my-2\"style={{backgroundColor:\"#043d76\"}}  onClick={login}>Login</button>\n                </form>\n                  <div className=\"row\">\n                <div  className=\"col-6\">\n                  <Link to=\"/signup\" style={{float:'left'}}>New User? Click Here</Link>\n                </div>\n                <div className=\"col-6\">\n                  <Link to=\"/forgotpass\" style={{float:'right'}}>Forgot password</Link>\n                </div>\n                </div>\n            </div>\n        )\n\t\t)\n\t\n}\n\nLogin = withRouter(Login)\n\nexport default connect()(Login);"]},"metadata":{},"sourceType":"module"}